<template>
<section class="py-6">
  <div class="container px-4 mx-auto">
    <h1 class="lg:px-18 text-5xl lg:text-7xl font-bold font-heading mb-14 mt-24 w-full text-center">2020 notre 1 ère édition</h1>
    <div class="lg:px-18 mb-8 lg:mb-0">
      <img class="rounded-3xl w-full h-[400px] mx-auto object-cover" src="public/2020-arrivee-nice.jpg" alt="">
    </div>

    <!-- Chiffres clés -->
    <div class="flex flex-wrap my-10">
      <div class="w-full  p-4">
        <p class="text-gray-600 text-lg text-center">We are driven to transform the landscape of learning into a captivating journey of excitement and discovery. Our aim is to infuse every educational experience with the essence of joy.</p>
      </div>
    </div>
    <Edition1RouleurChiffresCles />
    <h2 class="text-4xl lg:text-5xl font-semibold text-center mb-14">Récolte de dons pour l'hôpital Necker</h2>
    <div class="flex flex-wrap mb-32">
      <div class="w-full lg:w-1/2 p-4">
        <p class="text-gray-600 text-lg">We are driven to transform the landscape of learning into a captivating journey of excitement and discovery. Our aim is to infuse every educational experience with the essence of joy.</p>
      </div>
      <div class="w-full lg:w-1/2 p-4">
        <p class="text-gray-600 text-lg">Guided by our fervent belief in the power of education, we weave a tapestry of dynamic interactions that seamlessly blend technology, interactivity, and meaningful human connections.</p>
      </div>
    </div>

    

    <!-- Hopital dons -->
    <div class="flex flex-wrap mb-32 -mx-8">
      <div class="w-full lg:w-1/2 px-8">
        <h2 class="text-3xl lg:text-5xl font-bold font-heading mb-20 max-w-xs lg:max-w-lg">Qu'à permis la collecte de dons ?</h2>
        <img class="rounded-3xl mb-8 w-full lg:w-auto" src="public/default-hero-image.jpg" alt="">
        <img class="rounded-3xl mb-8 w-full lg:w-auto" src="public/default-hero-image.jpg" alt="">
      </div>
      <div class="w-full lg:w-1/2 px-8">
        <p class="text-gray-600 text-lg mb-6">Les dons ont permis à l'hôpital Necker ...</p>
        <div class="flex flex-col gap-2 mb-14">
          <div class="flex items-center flex-wrap gap-3">
            <div class="w-4 h-4 rounded-full bg-orange-500 border border-orange-600 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16" fill="none">
                <path d="M12.4733 4.8067C12.4114 4.74421 12.3376 4.69461 12.2564 4.66077C12.1752 4.62692 12.088 4.6095 12 4.6095C11.912 4.6095 11.8249 4.62692 11.7436 4.66077C11.6624 4.69461 11.5886 4.74421 11.5267 4.8067L6.56001 9.78003L4.47334 7.6867C4.40899 7.62454 4.33303 7.57566 4.2498 7.54286C4.16656 7.51006 4.07768 7.49397 3.98822 7.49552C3.89877 7.49706 3.8105 7.51622 3.72844 7.55188C3.64639 7.58754 3.57217 7.63902 3.51001 7.70336C3.44785 7.76771 3.39897 7.84367 3.36617 7.92691C3.33337 8.01014 3.31728 8.09903 3.31883 8.18848C3.32038 8.27793 3.33953 8.36621 3.37519 8.44826C3.41085 8.53031 3.46233 8.60454 3.52667 8.6667L6.08667 11.2267C6.14865 11.2892 6.22238 11.3388 6.30362 11.3726C6.38486 11.4065 6.472 11.4239 6.56001 11.4239C6.64802 11.4239 6.73515 11.4065 6.81639 11.3726C6.89763 11.3388 6.97137 11.2892 7.03334 11.2267L12.4733 5.7867C12.541 5.72427 12.595 5.6485 12.632 5.56417C12.6689 5.47983 12.688 5.38876 12.688 5.2967C12.688 5.20463 12.6689 5.11356 12.632 5.02923C12.595 4.94489 12.541 4.86912 12.4733 4.8067Z" fill="white"></path>
              </svg>
            </div>
            <span class="text-lg text-gray-600">540 lits</span>
          </div>
          <div class="flex items-center flex-wrap gap-3">
            <div class="w-4 h-4 rounded-full bg-orange-500 border border-orange-600 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16" fill="none">
                <path d="M12.4733 4.8067C12.4114 4.74421 12.3376 4.69461 12.2564 4.66077C12.1752 4.62692 12.088 4.6095 12 4.6095C11.912 4.6095 11.8249 4.62692 11.7436 4.66077C11.6624 4.69461 11.5886 4.74421 11.5267 4.8067L6.56001 9.78003L4.47334 7.6867C4.40899 7.62454 4.33303 7.57566 4.2498 7.54286C4.16656 7.51006 4.07768 7.49397 3.98822 7.49552C3.89877 7.49706 3.8105 7.51622 3.72844 7.55188C3.64639 7.58754 3.57217 7.63902 3.51001 7.70336C3.44785 7.76771 3.39897 7.84367 3.36617 7.92691C3.33337 8.01014 3.31728 8.09903 3.31883 8.18848C3.32038 8.27793 3.33953 8.36621 3.37519 8.44826C3.41085 8.53031 3.46233 8.60454 3.52667 8.6667L6.08667 11.2267C6.14865 11.2892 6.22238 11.3388 6.30362 11.3726C6.38486 11.4065 6.472 11.4239 6.56001 11.4239C6.64802 11.4239 6.73515 11.4065 6.81639 11.3726C6.89763 11.3388 6.97137 11.2892 7.03334 11.2267L12.4733 5.7867C12.541 5.72427 12.595 5.6485 12.632 5.56417C12.6689 5.47983 12.688 5.38876 12.688 5.2967C12.688 5.20463 12.6689 5.11356 12.632 5.02923C12.595 4.94489 12.541 4.86912 12.4733 4.8067Z" fill="white"></path>
              </svg>
            </div>
            <span class="text-lg text-gray-600">Divertissements</span>
          </div>
          <div class="flex items-center flex-wrap gap-3">
            <div class="w-4 h-4 rounded-full bg-orange-500 border border-orange-600 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16" fill="none">
                <path d="M12.4733 4.8067C12.4114 4.74421 12.3376 4.69461 12.2564 4.66077C12.1752 4.62692 12.088 4.6095 12 4.6095C11.912 4.6095 11.8249 4.62692 11.7436 4.66077C11.6624 4.69461 11.5886 4.74421 11.5267 4.8067L6.56001 9.78003L4.47334 7.6867C4.40899 7.62454 4.33303 7.57566 4.2498 7.54286C4.16656 7.51006 4.07768 7.49397 3.98822 7.49552C3.89877 7.49706 3.8105 7.51622 3.72844 7.55188C3.64639 7.58754 3.57217 7.63902 3.51001 7.70336C3.44785 7.76771 3.39897 7.84367 3.36617 7.92691C3.33337 8.01014 3.31728 8.09903 3.31883 8.18848C3.32038 8.27793 3.33953 8.36621 3.37519 8.44826C3.41085 8.53031 3.46233 8.60454 3.52667 8.6667L6.08667 11.2267C6.14865 11.2892 6.22238 11.3388 6.30362 11.3726C6.38486 11.4065 6.472 11.4239 6.56001 11.4239C6.64802 11.4239 6.73515 11.4065 6.81639 11.3726C6.89763 11.3388 6.97137 11.2892 7.03334 11.2267L12.4733 5.7867C12.541 5.72427 12.595 5.6485 12.632 5.56417C12.6689 5.47983 12.688 5.38876 12.688 5.2967C12.688 5.20463 12.6689 5.11356 12.632 5.02923C12.595 4.94489 12.541 4.86912 12.4733 4.8067Z" fill="white"></path>
              </svg>
            </div>
            <span class="text-lg text-gray-600">Entretien</span>
          </div>
        </div>
        <img class="rounded-3xl w-full lg:w-auto" src="public/default-hero-image.jpg" alt="">
      </div>
    </div>

    <!-- Les cyclistes -->
    <!-- <h2 class="text-4xl font-bold font-heading text-center mb-4">Les cyclistes</h2>
    <p class="text-center text-gray-600 mb-16">Un groupe motivé</p>
    <div class="flex flex-wrap mb-16 -mx-4">
      <div class="w-full lg:w-1/3 p-4">
        <div class="relative bg-no-repeat bg-cover rounded-3xl w-full max-w-sm mx-auto" style="height:440px;background-image:url('/default-hero-image.jpg')">
          <div class="absolute bottom-0 left-0 bg-white rounded-tr-3xl rounded-bl-3xl px-6 py-3">
            <h2 class="text-2xl font-bold font-heading mb-2">David Petrucci</h2>
          </div>
        </div>
      </div>
      <div class="w-full lg:w-1/3 p-4">
        <div class="relative bg-no-repeat bg-cover rounded-3xl w-full max-w-sm mx-auto" style="height:440px;background-image:url('/default-hero-image.jpg')">
          <div class="absolute bottom-0 left-0 bg-white rounded-tr-3xl rounded-bl-3xl px-6 py-3">
            <h2 class="text-2xl font-bold font-heading mb-2">Malika Gil</h2>
          </div>
        </div>
      </div>
      <div class="w-full lg:w-1/3 p-4">
        <div class="relative bg-no-repeat bg-cover rounded-3xl w-full max-w-sm mx-auto" style="height:440px;background-image:url('/default-hero-image.jpg')">
          <div class="absolute bottom-0 left-0 bg-white rounded-tr-3xl rounded-bl-3xl px-6 py-3">
            <h2 class="text-2xl font-bold font-heading mb-2">Erika Newton</h2>
          </div>
        </div>
      </div>
    </div> -->

    <!-- Etapes -->
    <h2 class="text-4xl font-bold font-heading text-center mb-4">Défi sportif</h2>
    <Edition1Etapes />

    <!-- Carousel -->
    <h2 class="text-4xl font-bold font-heading text-center mb-4">Photos</h2>
    <Edition1Carousel />
  </div>
</section>
</template>

<script setup lang="ts">
definePageMeta({
  layout: "1ere-edition",
});

interface Person {
  personPhotolUrl: string;
  prenom: string;
  nom: string;
  poste: string;
  description: string;
  reseaux: {
    facebook: string;
    twitter: string;
    linkedin: string;
    instagram: string;
  };
}

interface DescriptionAsso {
  title: string;
  description: string;
}

const persons = ref<Person[]>([]);
const descriptionAsso = ref<string>("");

const runtimeConfig = useRuntimeConfig();
const { public: { strapiBaseUrl, strapiToken } } = runtimeConfig;

const transformPersonObject = (personData) => {
  return personData.map((data) => {
    const { photo, ...otherAttributes } = data.attributes;
    return {
      ...otherAttributes,
      personPhotoUrl: strapiBaseUrl + photo.data.attributes.url,
    };
  });
};

const getPersons = async () => {
  const url = `${strapiBaseUrl}/api/who-are-wes?populate=*`;

  const { data, pending, error } = await useFetch(url, {
    method: "get",
    headers: {
      "Content-Type": "application/json",
      Authorization: `Bearer ${strapiToken}`,
    },
  });

  if (!error.value && !pending.value && data.value) {
    persons.value = transformPersonObject(data.value.data);
  } else {
    console.error(error.value);
  }
};

const getDescriptionAsso = async () => {
  const url = `${strapiBaseUrl}/api/description-asso`;

  const { data, pending, error } = await useFetch(url, {
    method: "get",
    headers: {
      "Content-Type": "application/json",
      Authorization: `Bearer ${strapiToken}`,
    },
  });

  if (!error.value && !pending.value && data.value) {
    descriptionAsso.value = data.value.data.attributes;
  } else {
    console.error(error.value);
  }
};

onMounted(() => {
  getPersons();
});
</script>

